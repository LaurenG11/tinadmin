<div
    novalidate
    [formGroup]="screenFormGroup"
>
    <div
        style="display: flex; flex-direction: column"
        magic="viewMyEvents"
    >
        <div style="display: flex; flex-direction: row">
            <label
                magic="lblSearch"
                class="lable_overflow mgFont1"
            >
                * From Date</label>
            <mat-form-field
                magic="dFromDate"
                [eventsOnly]=true
            ><input
                    matInput
                    [matDatepicker]="dFromDate"
                    magic="dFromDate"
                    formControlName="dFromDate"
                >
                <mat-datepicker-toggle
                    matSuffix
                    [for]="dFromDate"
                    *ngIf="mg.checkIsReadOnly('dFromDate')"
                ></mat-datepicker-toggle>
                <mat-datepicker #dFromDate></mat-datepicker>
            </mat-form-field>
            <mat-form-field>
                <div><input
                        matInput
                        magic="aSearchString"
                        formControlName="aSearchString"
                        mgFormat
                    >
                    <mgError magic="aSearchString"> </mgError>
                </div>
            </mat-form-field> <button
                mat-raised-button
                color="primary"
                magic="Search"
            >
                Search</button>
            <button
                mat-raised-button
                color="primary"
                magic="btnNewEvent"
            >
                NewEvent</button>
        </div>
        <div style="display: flex; flex-direction: row">
            <div class="example-container mat-elevation-z8 tblEventsTableContainerProps">
                <mat-table
                    #table
                    [dataSource]="dataSource"
                    class="container_border"
                    matSort
                    matSortDisableClear
                    (matSortChange)="tableService.sortData($event)"
                >
                    <ng-container
                        magic="clmEvent"
                        matColumnDef="clmEvent"
                    >
                        <mat-header-cell *matHeaderCellDef> Event </mat-header-cell>
                        <mat-cell
                            *matCellDef="let row"
                            magicMark="magicTableRowContainer"
                        >
                            <div
                                style="display: flex; flex-direction: row"
                                *ngIf="mg.ifRowCreated(row)"
                            >
                                <div
                                    [formGroup]="mg.getFormGroupByRow(row.rowId)"
                                    style="display: flex; flex-direction: row"
                                >
                                    <mat-form-field *ngIf="mg.isRowInRowEditing(row)">
                                        <div><input
                                                *ngIf="mg.isRowInRowEditing(row)"
                                                matInput
                                                magic="ShortDescription"
                                                [rowId]="row.rowId"
                                                formControlName="ShortDescription"
                                                mgFormat
                                                required
                                            >
                                            <mgError
                                                magic="ShortDescription"
                                                [rowId]="row.rowId"
                                            > </mgError>
                                        </div>
                                    </mat-form-field><label
                                        *ngIf="!mg.isRowInRowEditing(row)"
                                        magic="ShortDescription"
                                        [rowId]="row.rowId"
                                    >
                                        {{mg.getValue('ShortDescription', row.rowId)
}}
                                    </label>
                                </div>
                            </div>
                        </mat-cell>
                    </ng-container>
                    <ng-container
                        magic="clmDate"
                        matColumnDef="clmDate"
                    >
                        <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
                        <mat-cell
                            *matCellDef="let row"
                            magicMark="magicTableRowContainer"
                        >
                            <div
                                style="display: flex; flex-direction: row"
                                *ngIf="mg.ifRowCreated(row)"
                            >
                                <div
                                    [formGroup]="mg.getFormGroupByRow(row.rowId)"
                                    style="display: flex; flex-direction: row"
                                >
                                    <label
                                        magic="dStartDateCol"
                                        [rowId]="row.rowId"
                                    >
                                        {{mg.getValue('dStartDateCol', row.rowId)
| magicDate : 'dStartDateCol'}}
                                    </label>
                                </div>
                            </div>
                        </mat-cell>
                    </ng-container>
                    <ng-container
                        magic="Column9"
                        matColumnDef="Column9"
                    >
                        <mat-header-cell *matHeaderCellDef> </mat-header-cell>
                        <mat-cell
                            *matCellDef="let row"
                            magicMark="magicTableRowContainer"
                        >
                            <div
                                style="display: flex; flex-direction: row"
                                *ngIf="mg.ifRowCreated(row)"
                            >
                                <button
                                    mat-raised-button
                                    color="primary"
                                    magic="btnModify"
                                    [rowId]="row.rowId"
                                >
                                    Modify</button>
                                <button
                                    mat-raised-button
                                    color="primary"
                                    magic="btnDelete"
                                    [rowId]="row.rowId"
                                    [matTooltip]="mg.getTitle('btnDelete', row.rowId)"
                                    [disabled]="mg.isDisabled('btnDelete' , row.rowId)"
                                >
                                    Delete</button>
                                <button
                                    mat-raised-button
                                    color="primary"
                                    magic="btnTickets"
                                    [rowId]="row.rowId"
                                >
                                    Tickets</button>
                            </div>
                        </mat-cell>
                    </ng-container>
                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                    <mat-row
                        *matRowDef="let row; columns: displayedColumns;"
                        class="table_row"
                        [ngClass]="{ 'selected': selection.isSelected(row)}"
                        [magicRow]="row?.rowId"
                        (click)="tableService.selectRow(row.rowId)"
                    >
                    </mat-row>
                </mat-table>
                <mat-paginator
                    #paginator
                    [pageSize]="10"
                    [pageSizeOptions]="[5, 10, 20]"
                    (page)="tableService.mgOnPaginateChange($event)"
                >
                </mat-paginator>
            </div>
            <div>
                <mat-tab-group
                    magic="tabEventOrTicket"
                    (selectedTabChange)="task.mgOnTabSelectionChanged('tabEventOrTicket', $event.index)"
                    [selectedIndex]="mg.getTabSelectedIndex('tabEventOrTicket')"
                >
                    <mat-tab
                        *ngFor="let o of mg.getItemListValues('tabEventOrTicket')"
                        [label]="mg.getTabpageText('tabEventOrTicket', o.index)"
                    >
                    </mat-tab>
                </mat-tab-group>
                <div
                    class="tab_content"
                    [style.display]="mg.isTabPageSelected('tabEventOrTicket', 1) ? 'flex' : 'none' "
                    style="flex-direction: column"
                >
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblEventName"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblEventName' )"
                        >
                            Event Name *</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="aShortDescriptionTable"
                                    formControlName="aShortDescriptionTable"
                                    mgFormat
                                >
                                <mgError magic="aShortDescriptionTable"> </mgError>
                            </div>
                        </mat-form-field>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblSummary"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblSummary' )"
                        >
                            Summary *</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="aLongDescription"
                                    formControlName="aLongDescription"
                                    mgFormat
                                >
                                <mgError magic="aLongDescription"> </mgError>
                            </div>
                        </mat-form-field>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblAddres"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblAddres' )"
                        >
                            Address *</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="aAddress"
                                    formControlName="aAddress"
                                    mgFormat
                                >
                                <mgError magic="aAddress"> </mgError>
                            </div>
                        </mat-form-field>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblLocation"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblLocation' )"
                        >
                            Location</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="aLocation"
                                    formControlName="aLocation"
                                    mgFormat
                                >
                                <mgError magic="aLocation"> </mgError>
                            </div>
                        </mat-form-field>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblCity"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblCity' )"
                        >
                            City</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="aCity"
                                    formControlName="aCity"
                                    mgFormat
                                >
                                <mgError magic="aCity"> </mgError>
                            </div>
                        </mat-form-field>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblPostCode"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblPostCode' )"
                        >
                            Postal/Zip Code *</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="aPostCode"
                                    formControlName="aPostCode"
                                    mgFormat
                                >
                                <mgError magic="aPostCode"> </mgError>
                            </div>
                        </mat-form-field>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblEventImage"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblEventImage' )"
                        >
                            Event Image</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="aEventImage"
                                    formControlName="aEventImage"
                                    mgFormat
                                >
                                <mgError magic="aEventImage"> </mgError>
                            </div>
                        </mat-form-field>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblUrl"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblUrl' )"
                        >
                            Event URL</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="aEventUrl"
                                    formControlName="aEventUrl"
                                    mgFormat
                                >
                                <mgError magic="aEventUrl"> </mgError>
                            </div>
                        </mat-form-field>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblStartDate"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblStartDate' )"
                        >
                            Start Date *</label>
                        <mat-form-field
                            magic="dStartDate"
                            [eventsOnly]=true
                        ><input
                                matInput
                                [matDatepicker]="dStartDate"
                                magic="dStartDate"
                                formControlName="dStartDate"
                            >
                            <mat-datepicker-toggle
                                matSuffix
                                [for]="dStartDate"
                                *ngIf="mg.checkIsReadOnly('dStartDate')"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dStartDate></mat-datepicker>
                        </mat-form-field><label
                            magic="lblEndDate"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblEndDate' )"
                        >
                            End Date *</label>
                        <mat-form-field
                            magic="dEndDate"
                            [eventsOnly]=true
                        ><input
                                matInput
                                [matDatepicker]="dEndDate"
                                magic="dEndDate"
                                formControlName="dEndDate"
                            >
                            <mat-datepicker-toggle
                                matSuffix
                                [for]="dEndDate"
                                *ngIf="mg.checkIsReadOnly('dEndDate')"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #dEndDate></mat-datepicker>
                        </mat-form-field><label
                            magic="lblFromTime"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblFromTime' )"
                        >
                            From Time *</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="tFromTime"
                                    formControlName="tFromTime"
                                    mgFormat
                                >
                                <mgError magic="tFromTime"> </mgError>
                            </div>
                        </mat-form-field><label
                            magic="lblToTime"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblToTime' )"
                        >
                            To Time *</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="tToTime"
                                    formControlName="tToTime"
                                    mgFormat
                                >
                                <mgError magic="tToTime"> </mgError>
                            </div>
                        </mat-form-field>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblCategory"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblCategory' )"
                        >
                            Category *</label>
                        <div>
                            <mat-form-field>
                                <mat-select
                                    magic="cmbCategory"
                                    formControlName="cmbCategory"
                                >
                                    <mat-option
                                        *ngFor="let o of mg.getItemListValues('cmbCategory');"
                                        [value]="o.index"
                                    >
                                        {{o.displayValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblCurrency"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblCurrency' )"
                        >
                            Currency *</label>
                        <div>
                            <mat-form-field>
                                <mat-select
                                    magic="cmbCurrency"
                                    formControlName="cmbCurrency"
                                >
                                    <mat-option
                                        *ngFor="let o of mg.getItemListValues('cmbCurrency');"
                                        [value]="o.index"
                                    >
                                        {{o.displayValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblContactEmail"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblContactEmail' )"
                        >
                            Contact Email *</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="aContactEmail"
                                    formControlName="aContactEmail"
                                    mgFormat
                                >
                                <mgError magic="aContactEmail"> </mgError>
                            </div>
                        </mat-form-field>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <label
                            magic="lblContactNumber"
                            class="lable_overflow mgFont1"
                            [attr.disabled]="mg.isDisabled('lblContactNumber' )"
                        >
                            Contact Number *</label>
                        <mat-form-field>
                            <div><input
                                    matInput
                                    magic="aContactNumber"
                                    formControlName="aContactNumber"
                                    mgFormat
                                >
                                <mgError magic="aContactNumber"> </mgError>
                            </div>
                        </mat-form-field>
                    </div>
                    <div style="display: flex; flex-direction: row">
                        <div>
                            <mat-checkbox
                                magic="chkPublish"
                                formControlName="chkPublish"
                            >
                                Publish?</mat-checkbox>
                        </div>
                        <div>
                            <mat-checkbox
                                magic="chkFeature"
                                formControlName="chkFeature"
                            >
                                Feature?</mat-checkbox>
                        </div> <button
                            mat-raised-button
                            color="primary"
                            magic="btnSave"
                            [disabled]="mg.isDisabled('btnSave' )"
                        >
                            Save</button>
                    </div>
                </div>
                <div
                    class="tab_content"
                    [style.display]="mg.isTabPageSelected('tabEventOrTicket', 2) ? 'flex' : 'none' "
                    style="flex-direction: column"
                >
                    <div style="display: flex; flex-direction: row">
                        <mat-card>
                            <magic-subform magic="ticketsubform">
                            </magic-subform>
                        </mat-card>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>